<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module triq_dom</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module triq_dom</h1>
<ul class="index"><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>


<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-domain">domain()</a></h3>
<p><b>abstract datatype</b>: <tt>domain(T)</tt></p>
<p>Domain of values of type T.
 </p>

<h3 class="typedecl"><a name="type-pick_fun">pick_fun()</a></h3>
<p><b>abstract datatype</b>: <tt>pick_fun(T)</tt></p>
<p>Picks members of the <code>domain(T)</code>.
  Return pair of <code>{domain(T),T}</code>; the "output domain" is what will
  be used for shrinking the value.</p>

<h3 class="typedecl"><a name="type-shrink_fun">shrink_fun()</a></h3>
<p><b>abstract datatype</b>: <tt>shrink_fun(T)</tt></p>
<p>Shrinks members of the <code>domain(T)</code>.
  Return pair of <code>{domain(T),T}</code>; the "output domain" is what will
  be used for further shrinking the value.</p>

<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#any-0">any/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#atom-0">atom/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#atom-1">atom/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#binary-0">binary/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#binary-1">binary/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#bind-2">bind/2</a></td><td>Support function for the <code>?LET(Vars,Dom1,Dom2)</code> macro.</td></tr>
<tr><td valign="top"><a href="#bool-0">bool/0</a></td><td>The domain of booleans.</td></tr>
<tr><td valign="top"><a href="#char-0">char/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#choose-2">choose/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#domain-3">domain/3</a></td><td>Create custom domain.</td></tr>
<tr><td valign="top"><a href="#elements-1">elements/1</a></td><td>Generates a member of the list <code>L</code>.</td></tr>
<tr><td valign="top"><a href="#int-0">int/0</a></td><td>The domain of integers.</td></tr>
<tr><td valign="top"><a href="#list-1">list/1</a></td><td>
  Returns the domain of lists of the argument.</td></tr>
<tr><td valign="top"><a href="#non_empty-1">non_empty/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#oneof-1">oneof/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#open-1">open/1</a></td><td>Open a box, yielding a domain which always generates the same value.</td></tr>
<tr><td valign="top"><a href="#peek-1">peek/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#pick-2">pick/2</a></td><td>The heart of the random structure generator; pick a value from the domain.</td></tr>
<tr><td valign="top"><a href="#real-0">real/0</a></td><td>The domain of floats.</td></tr>
<tr><td valign="top"><a href="#resize-2">resize/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#return-1">return/1</a></td><td>Returns the domain containing exactly <code>Value</code>.</td></tr>
<tr><td valign="top"><a href="#sample-1">sample/1</a></td><td>
  Generate a sample of output values from a generator.</td></tr>
<tr><td valign="top"><a href="#sampleshrink-1">sampleshrink/1</a></td><td>Print a value generated by <code>Domain</code>, followed by a sample of shrinkings.</td></tr>
<tr><td valign="top"><a href="#seal-1">seal/1</a></td><td>Get the domain of boxes of T.</td></tr>
<tr><td valign="top"><a href="#shrink-2">shrink/2</a></td><td>The shrinking step function used internally in Triq.</td></tr>
<tr><td valign="top"><a href="#sized-1">sized/1</a></td><td>Support function for the ?SIZED macro.</td></tr>
<tr><td valign="top"><a href="#suchthat-2">suchthat/2</a></td><td>Support function for the ?SUCHTHAT macro.</td></tr>
<tr><td valign="top"><a href="#tuple-1">tuple/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#vector-2">vector/2</a></td><td></td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="any-0">any/0</a></h3>
<div class="spec">
<p><tt>any() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="atom-0">atom/0</a></h3>
<div class="spec">
<p><tt>atom() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="atom-1">atom/1</a></h3>
<div class="spec">
<p><tt>atom(Size) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="binary-0">binary/0</a></h3>
<div class="spec">
<p><tt>binary() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="binary-1">binary/1</a></h3>
<div class="spec">
<p><tt>binary(Size) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="bind-2">bind/2</a></h3>
<div class="spec">
<p><tt>bind(Gen1::<a href="#type-domain">domain(T)</a>, FG2::<a href="#type-fun">'fun'((T) -&gt; <a href="#type-domain">domain(D)</a>)</a>) -&gt; <a href="#type-domain">domain(D)</a></tt></p>
</div><p>Support function for the <code>?LET(Vars,Dom1,Dom2)</code> macro.</p>

<h3 class="function"><a name="bool-0">bool/0</a></h3>
<div class="spec">
<p><tt>bool() -&gt; <a href="#type-domain">domain(true | false)</a></tt></p>
</div><p>The domain of booleans.  Shrinks to false.</p>

<h3 class="function"><a name="char-0">char/0</a></h3>
<div class="spec">
<p><tt>char() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="choose-2">choose/2</a></h3>
<div class="spec">
<p><tt>choose(M, N) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="domain-3">domain/3</a></h3>
<div class="spec">
<p><tt>domain(Name::any(), PickFun::<a href="#type-pick_fun">pick_fun(T)</a>, ShrinkFun::<a href="#type-shrink_fun">shrink_fun(T)</a>) -&gt; <a href="#type-domain">domain(T)</a></tt></p>
</div><p><p>Create custom domain.  
This function allows you to create a custom domain with it's own  
shrinking logic.  For instance, the even numbers can be specified thus:</p>
 
  <pre>even() -&gt;
     domain(even,
       fun(Self,Size) -&gt;
             Value = (random:uniform(Size) * 2) div 2,
             {Self, Value}
       end,
       fun(Self,Value) when Value&gt;0 -&gt;
             {Self, Value-2};
          (Self,_,0) -&gt;
             {0, 0}
       end).</pre>
 
  <p>The domain itself (<code>Self</code> in the above code) is passed as the first argument  
to each invocation of both the picking and the shrinking functions.</p>
 
  Both the picking and the shrinking function must return a 2-tuple of
  the domain of the resulting value, and the value itself.
 </p>

<h3 class="function"><a name="elements-1">elements/1</a></h3>
<div class="spec">
<p><tt>elements(L) -&gt; any()</tt></p>
</div><p>Generates a member of the list <code>L</code>.  Shrinks towards the first element of the list.</p>

<h3 class="function"><a name="int-0">int/0</a></h3>
<div class="spec">
<p><tt>int() -&gt; <a href="#type-domain">domain(integer())</a></tt></p>
</div><p>The domain of integers.</p>

<h3 class="function"><a name="list-1">list/1</a></h3>
<div class="spec">
<p><tt>list(ElemDom::<a href="#type-domain">domain(T)</a>) -&gt; <a href="#type-domain">domain([T])</a></tt></p>
</div><p>
  Returns the domain of lists of the argument.
  For example, <code>list(int())</code> yields the domain of lists of integers.
 </p>

<h3 class="function"><a name="non_empty-1">non_empty/1</a></h3>
<div class="spec">
<p><tt>non_empty(?DOM) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="oneof-1">oneof/1</a></h3>
<div class="spec">
<p><tt>oneof(DomList) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="open-1">open/1</a></h3>
<div class="spec">
<p><tt>open(?BOX::<a href="#type-box">box(T)</a>) -&gt; <a href="#type-domain">domain(T)</a></tt></p>
</div><p>Open a box, yielding a domain which always generates the same value.</p>

<h3 class="function"><a name="peek-1">peek/1</a></h3>
<div class="spec">
<p><tt>peek(?BOX) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="pick-2">pick/2</a></h3>
<div class="spec">
<p><tt>pick(Dom::<a href="#type-domain">domain(T)</a>, SampleSize::<a href="#type-pos_integer">pos_integer()</a>) -&gt; {<a href="#type-domain">domain(T)</a>, T}</tt></p>
</div><p>The heart of the random structure generator; pick a value from the domain.
    Returns a pair of <code>{domain(T), T}</code> where the first component describes
    the structure of the picked value.</p>

<h3 class="function"><a name="real-0">real/0</a></h3>
<div class="spec">
<p><tt>real() -&gt; <a href="#type-domain">domain(float())</a></tt></p>
</div><p>The domain of floats.</p>

<h3 class="function"><a name="resize-2">resize/2</a></h3>
<div class="spec">
<p><tt>resize(Sz, Dom) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="return-1">return/1</a></h3>
<div class="spec">
<p><tt>return(Value::Type) -&gt; <a href="#type-domain">domain(Type)</a></tt></p>
</div><p>Returns the domain containing exactly <code>Value</code>.
  Triq uses internally records of type <code>@</code>; and so to avoid
  interpretation of such values you can wrap it with this.  This would
  be the case if you have constants in your domains contain the atom <code>@</code>.
  I.e., the following would break because Triq tries to interpret the <code>@</code>:
 <pre>?FORALL(X, [int(), {'@', 4}],
    [IntVal, {'@', 4}] = X
 )</pre>
 To fix it, do like this:
 <pre>?FORALL(X, [int(), return({'@', 4})],
    [IntVal, {'@', 4}] = X
 )</pre></p>

<h3 class="function"><a name="sample-1">sample/1</a></h3>
<div class="spec">
<p><tt>sample(Dom::<a href="#type-domain">domain(T)</a>) -&gt; [T]</tt></p>
</div><p>
  Generate a sample of output values from a generator.
 </p>

<h3 class="function"><a name="sampleshrink-1">sampleshrink/1</a></h3>
<div class="spec">
<p><tt>sampleshrink(Domain::<a href="#type-domain">domain(any())</a>) -&gt; ok</tt></p>
</div><p><p>Print a value generated by <code>Domain</code>, followed by a sample of shrinkings.  
For each line of successive output, it prints up to five samples of  
shrinking.  The first value on each like is used as the target for the next  
round of shrinking.</p>
 
  <pre> 1&gt; sampleshrink(list(int())).
 [-2,-8,2]
 [[-1,-8,2],[0,-8,2],[-1,-7,2],[-2,-8,1],[-1,-8,1]]
 [[0,-8,2],[0,-6,1],[-1,-7,2],[0,-7,2]]
 [[0,-8,0],[0,-7,0],[0,-7,2],[0,-8,1],[0,-5,2],[0,-7,1]]
 [[0,-7,0],[0,-5,0]]
 [[0,-5,0],[0,-6,0]]
 [[0,-4,0],[0,-3,0]]
 [[0,-2,0],[0,-3,0],[0,-1,0]]
 [[0,-1,0]]
 [[0,0,0]]
 [[0,0]]
 [[0]]
 [[]]
 ok</pre></p>

<h3 class="function"><a name="seal-1">seal/1</a></h3>
<div class="spec">
<p><tt>seal(Dom::<a href="#type-domain">domain(T)</a>) -&gt; <a href="#type-domain">domain(<a href="#type-box">box(T)</a>)</a></tt></p>
</div><p>Get the domain of boxes of T</p>

<h3 class="function"><a name="shrink-2">shrink/2</a></h3>
<div class="spec">
<p><tt>shrink(Domain::<a href="#type-domain">domain(T)</a>, Value::T) -&gt; {<a href="#type-domain">domain(T)</a>, T}</tt></p>
</div><p><p>The shrinking step function used internally in Triq.</p>
 
  <p>Performs one single step of shrinking.  If unsuccessful,  
i.e. value cound not be shrunk, the output is equal to the input.</p>
 
  Takes a <code>Domain</code> and a <code>Value</code> from said domain, and shrinks
  the value within the constraints of the domain.  The result is
  a tuple of a (possibly smaller) output domain, and the
  shrunken value.
 </p>

<h3 class="function"><a name="sized-1">sized/1</a></h3>
<div class="spec">
<p><tt>sized(Fun::<a href="#type-fun">'fun'((integer()) -&gt; <a href="#type-domain">domain(T)</a>)</a>) -&gt; <a href="#type-domain">domain(T)</a></tt></p>
</div><p>Support function for the ?SIZED macro.</p>

<h3 class="function"><a name="suchthat-2">suchthat/2</a></h3>
<div class="spec">
<p><tt>suchthat(Dom::<a href="#type-domain">domain(T)</a>, Predicate::<a href="#type-fun">'fun'((T) -&gt; <a href="#type-boolean">boolean()</a>)</a>) -&gt; <a href="#type-domain">domain(T)</a></tt></p>
</div><p>Support function for the ?SUCHTHAT macro.</p>

<h3 class="function"><a name="tuple-1">tuple/1</a></h3>
<div class="spec">
<p><tt>tuple(ElemDom::<a href="#type-domain">domain(ElemType::any())</a>) -&gt; <a href="#type-domain">domain(tuple(ElemType))</a></tt></p>
</div>

<h3 class="function"><a name="vector-2">vector/2</a></h3>
<div class="spec">
<p><tt>vector(Size, ElemDom) -&gt; any()</tt></p>
</div>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, May 27 2010, 11:41:57.</i></p>
</body>
</html>
